{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport { ofType } from 'redux-observable';\nimport { mergeMap, of } from 'rxjs';\nimport { addNewMessage } from \"../actions\";\nimport { actions } from \"../slices/messages\";\nvar perform = function perform(state$) {\n  return function (_ref) {\n    var payload = _ref.payload;\n    var messages = state$.value.dm.messages.data;\n    var updatedMessages = messages ? [].concat(_toConsumableArray(messages), [payload]) : [payload];\n    return of(actions.success(updatedMessages));\n  };\n};\nexport default (function (action$, state$) {\n  return action$.pipe(ofType(addNewMessage.type)).pipe(mergeMap(perform(state$)));\n});","map":{"version":3,"names":["ofType","mergeMap","of","addNewMessage","actions","perform","state$","_ref","payload","messages","value","dm","data","updatedMessages","concat","_toConsumableArray","success","action$","pipe","type"],"sources":["/home/nerds-pc/Projects/chat-app/Lyssa/src/direct-messages/epics/add-new-message.ts"],"sourcesContent":["import { ofType } from 'redux-observable'\nimport { mergeMap, of } from 'rxjs'\nimport { addNewMessage } from '../actions'\nimport { AnyAction } from '@reduxjs/toolkit'\nimport { actions } from '../slices/messages'\n\nconst perform = (state$) => ({payload}: AnyAction) => {\n  const messages = state$.value.dm.messages.data\n\n  const updatedMessages = messages ? [...messages, payload] : [payload]\n\n  return of(actions.success(updatedMessages))\n}\n\nexport default (action$, state$) => action$\n  .pipe(ofType(addNewMessage.type))\n  .pipe(mergeMap(perform(state$)))"],"mappings":";AAAA,SAASA,MAAM,QAAQ,kBAAkB;AACzC,SAASC,QAAQ,EAAEC,EAAE,QAAQ,MAAM;AACnC,SAASC,aAAa;AAEtB,SAASC,OAAO;AAEhB,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAIC,MAAM;EAAA,OAAK,UAAAC,IAAA,EAA0B;IAAA,IAAxBC,OAAO,GAAAD,IAAA,CAAPC,OAAO;IACnC,IAAMC,QAAQ,GAAGH,MAAM,CAACI,KAAK,CAACC,EAAE,CAACF,QAAQ,CAACG,IAAI;IAE9C,IAAMC,eAAe,GAAGJ,QAAQ,MAAAK,MAAA,CAAAC,kBAAA,CAAON,QAAQ,IAAED,OAAO,KAAI,CAACA,OAAO,CAAC;IAErE,OAAON,EAAE,CAACE,OAAO,CAACY,OAAO,CAACH,eAAe,CAAC,CAAC;EAC7C,CAAC;AAAA;AAED,gBAAe,UAACI,OAAO,EAAEX,MAAM;EAAA,OAAKW,OAAO,CACxCC,IAAI,CAAClB,MAAM,CAACG,aAAa,CAACgB,IAAI,CAAC,CAAC,CAChCD,IAAI,CAACjB,QAAQ,CAACI,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}